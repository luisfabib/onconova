<p-fluid>
    <form  [formGroup]="form" (ngSubmit)="onSave()">

        <div class="field">
            <label for="date" class="form-label required">Date recorded</label>
            <masked-calendar 
                formControlName="date"
            />
            <control-error controlName="date"></control-error>
        </div>

        <div class="field">
            <label class="form-label required">Relationship to the patient</label>
            <coded-concept-select 
                formControlName="relationship"
                terminology="FamilyMemberType"
                [showSynonyms]="false"/>
            <control-error controlName="relationship"></control-error>
        </div>

        <div class="field">
            <p-toggleswitch formControlName="hadCancer" />
            <label class="form-label required ml-2 mb-3">Relative has a history of cancer</label>
            <control-error controlName="hadCancer"></control-error>
        </div>

        <ng-container *ngIf="form.value.hadCancer"> 

            <div class="field">
                <label class="form-label">Topography</label>
                <coded-concept-select 
                    formControlName="topography"
                    terminology="CancerTopography"
                    [showSynonyms]="true"/>
                <control-error controlName="topography"></control-error>
            </div>

            <div class="field">
                <label class="form-label">Morphology</label>
                <coded-concept-select 
                    formControlName="morphology"
                    terminology="CancerMorphology"
                    [showSynonyms]="true"/>
                <control-error controlName="morphology"></control-error>
            </div>

            <div class="field">
                <label class="form-label">Approximate age at which the cancer was diagnosed</label>
                <p-inputnumber 
                    formControlName="onsetAge"
                    suffix=" years"
                    placeholder="Enter an age estimate"/>
                <control-error controlName="onsetAge"></control-error>
            </div>

            <div class="field">
                <label class="form-label">Did the cancer contribute to the relative's death?</label>
                <radio-select  
                    formControlName="contributedToDeath"
                    [choices]="contributedToDeathChoices"
                    class="flex flex-wrap gap-4"/>
                <control-error controlName="contributedToDeath"></control-error>
            </div>

    </ng-container> 

        <p-button 
            type="submit" 
            label="Save" 
            styleClass="w-full p-3 mt-2"  
            [loading]="loading"
            [disabled]="form.invalid" />
            
    </form>
</p-fluid>