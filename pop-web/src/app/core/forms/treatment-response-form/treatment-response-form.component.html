<p-fluid>
    <form  [formGroup]="form" (ngSubmit)="onSave()">

        <div class="field">
            <label for="date" class="form-label required">Date of the assessment</label>
            <pop-datepicker 
                formControlName="date"
            />
            <control-error controlName="date"></control-error>
        </div>
        
        @let relatedEntities = relatedEntities$ | async;
        <div class="field">
            <label class="form-label required">Neoplastic entities assessed</label>
            <reference-multiselect 
            [references]="relatedEntities || []" 
            formControlName="assessedEntities"/>
            <control-error controlName="assessedEntities"></control-error>
        </div>

        <div class="field">
            <label class="form-label required">Imaging technique</label>
            <coded-concept-select 
                terminology="CancerTreatmentResponseObservationMethod"
                [showSynonyms]="true"
                formControlName="methodology"/>
            <control-error controlName="methodology"></control-error>
        </div>

        <div class="field">
            <label class="form-label">Imaged anatomical location(s)</label>
            <coded-concept-select 
                terminology="ObservationBodySite"
                [showSynonyms]="true"
                [multiple]="true"
                formControlName="assessedBodysites"/>
            <control-error controlName="assessedBodysites"></control-error>
        </div>

        <div class="field">
            <label class="form-label required">Response Evaluation Criteria in Solid Tumours (RECIST)</label>
            <coded-concept-select 
                terminology="CancerTreatmentResponse"
                [showSynonyms]="false"
                formControlName="recist"/>
            <control-error controlName="recist"></control-error>
        </div>

        <div class="field">
            <label class="form-label required">Was the RECIST value interpreted or reported?</label>
            <radio-select
                formControlName="recistInterpreted"
                [choices]="interpretationChoices"/>
            <control-error controlName="recistInterpreted"></control-error>
        </div>

        <p-button 
            type="submit" 
            label="Save" 
            styleClass="w-full p-3 mt-2"  
            [loading]="loading"
            [disabled]="form.invalid" />
            
    </form>
</p-fluid>