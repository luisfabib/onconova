<div class="flex mb-5">
    <p-iconField iconPosition="left">
        <p-inputIcon styleClass="pi pi-search" />
        <input type="text" pInputText placeholder="Search" [(ngModel)]="filterValue" (ngModelChange)="filterPatients(filterValue)"/>
    </p-iconField>

    <p-button (onClick)="openModalForm()" label="New case" class="ml-3 ml-auto"></p-button>
</div>
    <div class="my-3 ml-3">
        <span class="font-bold">{{total}}</span> matching cases found
    </div>
        <p-dataView 
            [value]="cases"
            [paginator]="true" 
            [rows]="pageSize" 
            [rowsPerPageOptions]="pageSizeChoices"
            [totalRecords]="totalCases"
            class="no-background"
        >
        <ng-template pTemplate="list" let-pagePatients>
            <div class="grid grid-nogutter">
                <div class="col-12" *ngFor="let patientCase of pagePatients; let first = first" class="col-12">
                    <app-case-browser-item [case]="patientCase"></app-case-browser-item>
                </div>
            </div>
        </ng-template>
    </p-dataView>

    <!-- Skeleton loader -->
    <div *ngIf="loading">
        <ng-container *ngFor="let _ of [].constructor(20); let first=first">
            <div class="flex flex-row  p-4 gap-3" [ngClass]="{ 'border-top-1 surface-border': !first }">
                <p-skeleton [style]="{ width: '4rem', height: '4rem'}"></p-skeleton>
                <div class="flex flex-column">
                    <p-skeleton class="mb-2 mt-3" [style]="{ width: '10rem', height: '1rem'}"></p-skeleton>    
                    <p-skeleton [style]="{ width: '20rem', height: '1rem' }"></p-skeleton>      
                </div>
            </div>
        </ng-container>
    </div>

<app-dynamic-modal-form (saveEvent)="getPatientList()"></app-dynamic-modal-form>
