{
  "openapi": "3.1.0",
  "info": {
    "title": "POP API",
    "version": "1.0.0",
    "description": "Precision Oncology Platform API for exchange of research cancer data"
  },
  "paths": {
    "/api/auth/users": {
      "get": {
        "operationId": "getUsers",
        "summary": "Get All Users Matching The Query",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/UserSchema"
                  },
                  "title": "Response",
                  "type": "array"
                }
              }
            }
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/users/{userId}": {
      "get": {
        "operationId": "getUserById",
        "summary": "Get User By Id",
        "parameters": [
          {
            "in": "path",
            "name": "userId",
            "schema": {
              "title": "Userid",
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserSchema"
                }
              }
            }
          },
          "404": {
            "description": "Not Found"
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/sliding": {
      "post": {
        "operationId": "getSlidingToken",
        "summary": "Obtain Token",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SlidingTokenSchema"
                }
              }
            }
          }
        },
        "tags": [
          "Auth"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCredentialsSchema"
              }
            }
          },
          "required": true
        }
      }
    },
    "/api/auth/sliding/refresh": {
      "post": {
        "operationId": "refereshSlidingToken",
        "summary": "Refresh Token",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewSlidingTokenSchema"
                }
              }
            }
          }
        },
        "tags": [
          "Auth"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OldSlidingTokenSchema"
              }
            }
          },
          "required": true
        }
      }
    },
    "/api/patient-cases/": {
      "post": {
        "operationId": "createPatientCase",
        "summary": "Create Cancer Patient",
        "parameters": [],
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResourceIdSchema"
                }
              }
            }
          }
        },
        "tags": [
          "Patient Cases"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PatientCaseCreate"
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "JWTAuth": []
          }
        ]
      },
      "get": {
        "operationId": "getPatientCases",
        "summary": "Get All Cancer Patient Matching The Query",
        "parameters": [
          {
            "in": "query",
            "name": "age_lte",
            "schema": {
              "title": "Age Lte",
              "type": "integer"
            },
            "required": false
          },
          {
            "in": "query",
            "name": "age_gte",
            "schema": {
              "title": "Age Gte",
              "type": "integer"
            },
            "required": false
          },
          {
            "in": "query",
            "name": "pseudoidentifier",
            "schema": {
              "title": "Pseudoidentifier",
              "type": "string"
            },
            "required": false
          },
          {
            "in": "query",
            "name": "deceased",
            "schema": {
              "title": "Deceased",
              "type": "boolean"
            },
            "required": false
          },
          {
            "in": "query",
            "name": "gender",
            "schema": {
              "items": {
                "enum": [
                  "male",
                  "female",
                  "unknown"
                ],
                "title": "GenderEnum",
                "type": "string"
              },
              "title": "Gender",
              "type": "array"
            },
            "required": false
          },
          {
            "in": "query",
            "name": "born",
            "schema": {
              "format": "date",
              "title": "Born",
              "type": "string"
            },
            "required": false
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "default": 100,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            },
            "required": false
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "default": 0,
              "minimum": 0,
              "title": "Offset",
              "type": "integer"
            },
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Paginated_PatientCase_"
                }
              }
            }
          }
        },
        "tags": [
          "Patient Cases"
        ],
        "security": [
          {
            "JWTAuth": []
          }
        ]
      }
    },
    "/api/patient-cases/{patientId}": {
      "delete": {
        "operationId": "deletePatientCaseById",
        "summary": "Delete Cancer Patient",
        "parameters": [
          {
            "in": "path",
            "name": "patientId",
            "schema": {
              "title": "Patientid",
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "204": {
            "description": "No Content"
          },
          "404": {
            "description": "Not Found"
          }
        },
        "tags": [
          "Patient Cases"
        ],
        "security": [
          {
            "JWTAuth": []
          }
        ]
      },
      "get": {
        "operationId": "getPatientCaseById",
        "summary": "Get Cancer Patient By Id",
        "parameters": [
          {
            "in": "path",
            "name": "patientId",
            "schema": {
              "title": "Patientid",
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PatientCase"
                }
              }
            }
          },
          "404": {
            "description": "Not Found"
          }
        },
        "tags": [
          "Patient Cases"
        ],
        "security": [
          {
            "JWTAuth": []
          }
        ]
      },
      "put": {
        "operationId": "updatePatientCaseById",
        "summary": "Update Cancer Patient",
        "parameters": [
          {
            "in": "path",
            "name": "patientId",
            "schema": {
              "title": "Patientid",
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "204": {
            "description": "No Content"
          },
          "404": {
            "description": "Not Found"
          }
        },
        "tags": [
          "Patient Cases"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PatientCaseCreate"
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "JWTAuth": []
          }
        ]
      }
    },
    "/api/terminologies/{terminology}/concepts": {
      "get": {
        "operationId": "getTerminologyConcepts",
        "summary": "Get Terminology Concepts",
        "parameters": [
          {
            "in": "path",
            "name": "terminology",
            "schema": {
              "title": "Terminology",
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/CodedConceptSchema"
                  },
                  "title": "Response",
                  "type": "array"
                }
              }
            }
          }
        },
        "tags": [
          "Terminology"
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "UserSchema": {
        "properties": {
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "username": {
            "title": "Username",
            "type": "string"
          },
          "email": {
            "title": "Email",
            "type": "string"
          },
          "firstName": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Firstname"
          },
          "lastName": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lastname"
          }
        },
        "required": [
          "id",
          "username",
          "email"
        ],
        "title": "User",
        "type": "object"
      },
      "SlidingTokenSchema": {
        "properties": {
          "username": {
            "description": "Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
            "maxLength": 150,
            "title": "Username",
            "type": "string"
          },
          "token": {
            "title": "Token",
            "type": "string"
          }
        },
        "required": [
          "username",
          "token"
        ],
        "title": "SlidingToken",
        "type": "object"
      },
      "UserCredentialsSchema": {
        "properties": {
          "password": {
            "format": "password",
            "title": "Password",
            "type": "string",
            "writeOnly": true
          },
          "username": {
            "title": "Username",
            "type": "string"
          }
        },
        "required": [
          "password",
          "username"
        ],
        "title": "UserCredentials",
        "type": "object"
      },
      "NewSlidingTokenSchema": {
        "properties": {
          "token": {
            "title": "Token",
            "type": "string"
          }
        },
        "required": [
          "token"
        ],
        "title": "OldSlidingToken",
        "type": "object"
      },
      "OldSlidingTokenSchema": {
        "properties": {
          "token": {
            "title": "Token",
            "type": "string"
          }
        },
        "required": [
          "token"
        ],
        "title": "OldSlidingToken",
        "type": "object"
      },
      "ResourceIdSchema": {
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          }
        },
        "required": [
          "id"
        ],
        "title": "ResourceId",
        "type": "object"
      },
      "CodedConceptSchema": {
        "properties": {
          "code": {
            "title": "Code",
            "type": "string"
          },
          "system": {
            "title": "System",
            "type": "string"
          },
          "display": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display"
          },
          "version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version"
          },
          "synonyms": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Synonyms"
          },
          "properties": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Properties"
          }
        },
        "required": [
          "code",
          "system"
        ],
        "title": "CodedConcept",
        "type": "object"
      },
      "PatientCaseCreate": {
        "properties": {
          "gender": {
            "$ref": "#/components/schemas/CodedConceptSchema",
            "description": "Gender for administrative purposes",
            "examples": [],
            "title": "Gender"
          },
          "race": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CodedConceptSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Race of the patient",
            "examples": [],
            "title": "Race"
          },
          "sexAtBirth": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CodedConceptSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Sex assigned at birth",
            "examples": [],
            "title": "Birth sex"
          },
          "genderIdentity": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CodedConceptSchema"
              },
              {
                "type": "null"
              }
            ],
            "examples": [],
            "title": "Gender identity"
          },
          "dateOfBirth": {
            "description": "Anonymized date of birth (year/month). The day is set to the first day of the month by convention.",
            "examples": [],
            "format": "date",
            "title": "Date of birth",
            "type": "string"
          },
          "dateOfDeath": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Anonymized date of death (year/month). The day is set to the first day of the month by convention.",
            "examples": [],
            "title": "Date of death"
          },
          "causeOfDeath": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CodedConceptSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Classification of the cause of death.",
            "examples": [],
            "title": "Cause of death"
          }
        },
        "required": [
          "gender",
          "dateOfBirth"
        ],
        "title": "PatientCaseCreate",
        "type": "object"
      },
      "Filters": {
        "properties": {
          "age_lte": {
            "title": "Age Lte",
            "type": "integer"
          },
          "age_gte": {
            "title": "Age Gte",
            "type": "integer"
          },
          "pseudoidentifier": {
            "title": "Pseudoidentifier",
            "type": "string"
          },
          "deceased": {
            "title": "Deceased",
            "type": "boolean"
          },
          "gender": {
            "items": {
              "enum": [
                "male",
                "female",
                "unknown"
              ],
              "title": "GenderEnum",
              "type": "string"
            },
            "title": "Gender",
            "type": "array"
          },
          "born": {
            "format": "date",
            "title": "Born",
            "type": "string"
          }
        },
        "title": "Filters",
        "type": "object"
      },
      "GenderEnum": {
        "enum": [
          "male",
          "female",
          "unknown"
        ],
        "title": "GenderEnum",
        "type": "string"
      },
      "Input": {
        "properties": {
          "limit": {
            "default": 100,
            "minimum": 1,
            "title": "Limit",
            "type": "integer"
          },
          "offset": {
            "default": 0,
            "minimum": 0,
            "title": "Offset",
            "type": "integer"
          }
        },
        "title": "Input",
        "type": "object"
      },
      "Paginated_PatientCase_": {
        "properties": {
          "count": {
            "title": "Count",
            "type": "integer"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/PatientCase"
            },
            "title": "Items",
            "type": "array"
          }
        },
        "required": [
          "count",
          "items"
        ],
        "title": "Paginated[PatientCase]",
        "type": "object"
      },
      "PatientCase": {
        "properties": {
          "age": {
            "description": "Approximate age of the patient in years",
            "title": "Age",
            "type": "integer"
          },
          "id": {
            "examples": [],
            "maxLength": 64,
            "title": "Id",
            "type": "string"
          },
          "createdAt": {
            "examples": [],
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "updatedAt": {
            "examples": [],
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          },
          "createdById": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "The user who created the original data",
            "examples": [],
            "title": "Created By"
          },
          "pseudoidentifier": {
            "description": "Pseudoidentifier of the patient",
            "examples": [],
            "maxLength": 40,
            "title": "Pseudoidentifier",
            "type": "string"
          },
          "gender": {
            "$ref": "#/components/schemas/CodedConceptSchema",
            "description": "Gender for administrative purposes",
            "examples": [],
            "title": "Gender"
          },
          "race": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CodedConceptSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Race of the patient",
            "examples": [],
            "title": "Race"
          },
          "sexAtBirth": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CodedConceptSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Sex assigned at birth",
            "examples": [],
            "title": "Birth sex"
          },
          "genderIdentity": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CodedConceptSchema"
              },
              {
                "type": "null"
              }
            ],
            "examples": [],
            "title": "Gender identity"
          },
          "dateOfBirth": {
            "description": "Anonymized date of birth (year/month). The day is set to the first day of the month by convention.",
            "examples": [],
            "format": "date",
            "title": "Date of birth",
            "type": "string"
          },
          "isDeceased": {
            "description": "Indicates if the individual is deceased or not (determined automatically based on existence of a date of death)",
            "examples": [],
            "title": "Is deceased",
            "type": "boolean"
          },
          "dateOfDeath": {
            "anyOf": [
              {
                "format": "date",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Anonymized date of death (year/month). The day is set to the first day of the month by convention.",
            "examples": [],
            "title": "Date of death"
          },
          "causeOfDeath": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CodedConceptSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Classification of the cause of death.",
            "examples": [],
            "title": "Cause of death"
          },
          "updatedByIds": {
            "default": [],
            "description": "The user(s) who updated the data since its creation",
            "examples": [],
            "items": {
              "type": "integer"
            },
            "title": "Updated By",
            "type": "array"
          }
        },
        "required": [
          "age",
          "id",
          "createdAt",
          "updatedAt",
          "pseudoidentifier",
          "gender",
          "dateOfBirth",
          "isDeceased"
        ],
        "title": "PatientCase",
        "type": "object"
      }
    },
    "securitySchemes": {
      "JWTAuth": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  },
  "servers": []
}