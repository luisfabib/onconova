# Generated by Django 5.1 on 2025-06-10 15:15

import pgtrigger.compiler
import pgtrigger.migrations
from django.db import migrations


class Migration(migrations.Migration):

    dependencies = [
        ('oncology', '0013_remove_systemictherapy_create_insert_and_more'),
    ]

    operations = [
        pgtrigger.migrations.RemoveTrigger(
            model_name='radiotherapy',
            name='create_insert',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='radiotherapy',
            name='update_update',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='radiotherapy',
            name='delete_delete',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='surgery',
            name='create_insert',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='surgery',
            name='update_update',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='surgery',
            name='delete_delete',
        ),
        migrations.RemoveField(
            model_name='radiotherapyevent',
            name='id',
        ),
        migrations.RemoveField(
            model_name='radiotherapyevent',
            name='therapy_line',
        ),
        migrations.RemoveField(
            model_name='surgeryevent',
            name='id',
        ),
        migrations.RemoveField(
            model_name='surgeryevent',
            name='therapy_line',
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='radiotherapy',
            trigger=pgtrigger.compiler.Trigger(name='create_insert', sql=pgtrigger.compiler.UpsertTriggerSql(func='INSERT INTO "oncology_radiotherapyevent" ("case_id", "external_source", "external_source_id", "intent", "period", "pgh_context", "pgh_context_id", "pgh_created_at", "pgh_label", "pgh_obj_id", "sessions", "termination_reason_id") VALUES (NEW."case_id", NEW."external_source", NEW."external_source_id", NEW."intent", NEW."period", COALESCE(NULLIF(CURRENT_SETTING(\'pghistory.context_metadata\', TRUE), \'\'), NULL)::JSONB, COALESCE(NULLIF(CURRENT_SETTING(\'pghistory.context_id\', TRUE), \'\'), NULL)::UUID, NOW(), \'create\', NEW."id", NEW."sessions", NEW."termination_reason_id"); RETURN NULL;', hash='22e67407d1427807d70c921ea74b447fdd4a8fb9', operation='INSERT', pgid='pgtrigger_create_insert_9d3c3', table='oncology_radiotherapy', when='AFTER')),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='radiotherapy',
            trigger=pgtrigger.compiler.Trigger(name='update_update', sql=pgtrigger.compiler.UpsertTriggerSql(condition='WHEN (OLD."case_id" IS DISTINCT FROM (NEW."case_id") OR OLD."external_source" IS DISTINCT FROM (NEW."external_source") OR OLD."external_source_id" IS DISTINCT FROM (NEW."external_source_id") OR OLD."intent" IS DISTINCT FROM (NEW."intent") OR OLD."period" IS DISTINCT FROM (NEW."period") OR OLD."sessions" IS DISTINCT FROM (NEW."sessions") OR OLD."termination_reason_id" IS DISTINCT FROM (NEW."termination_reason_id"))', func='INSERT INTO "oncology_radiotherapyevent" ("case_id", "external_source", "external_source_id", "intent", "period", "pgh_context", "pgh_context_id", "pgh_created_at", "pgh_label", "pgh_obj_id", "sessions", "termination_reason_id") VALUES (NEW."case_id", NEW."external_source", NEW."external_source_id", NEW."intent", NEW."period", COALESCE(NULLIF(CURRENT_SETTING(\'pghistory.context_metadata\', TRUE), \'\'), NULL)::JSONB, COALESCE(NULLIF(CURRENT_SETTING(\'pghistory.context_id\', TRUE), \'\'), NULL)::UUID, NOW(), \'update\', NEW."id", NEW."sessions", NEW."termination_reason_id"); RETURN NULL;', hash='6022fd6346f636b9ce2b79242c2da563b97ea675', operation='UPDATE', pgid='pgtrigger_update_update_f2cc5', table='oncology_radiotherapy', when='AFTER')),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='radiotherapy',
            trigger=pgtrigger.compiler.Trigger(name='delete_delete', sql=pgtrigger.compiler.UpsertTriggerSql(func='INSERT INTO "oncology_radiotherapyevent" ("case_id", "external_source", "external_source_id", "intent", "period", "pgh_context", "pgh_context_id", "pgh_created_at", "pgh_label", "pgh_obj_id", "sessions", "termination_reason_id") VALUES (OLD."case_id", OLD."external_source", OLD."external_source_id", OLD."intent", OLD."period", COALESCE(NULLIF(CURRENT_SETTING(\'pghistory.context_metadata\', TRUE), \'\'), NULL)::JSONB, COALESCE(NULLIF(CURRENT_SETTING(\'pghistory.context_id\', TRUE), \'\'), NULL)::UUID, NOW(), \'delete\', OLD."id", OLD."sessions", OLD."termination_reason_id"); RETURN NULL;', hash='9e55c7d3b631fca9fb4ae4f9dbfa8a176e77193d', operation='DELETE', pgid='pgtrigger_delete_delete_40b48', table='oncology_radiotherapy', when='AFTER')),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='surgery',
            trigger=pgtrigger.compiler.Trigger(name='create_insert', sql=pgtrigger.compiler.UpsertTriggerSql(func='INSERT INTO "oncology_surgeryevent" ("bodysite_id", "bodysite_laterality_id", "bodysite_qualifier_id", "case_id", "date", "external_source", "external_source_id", "intent", "outcome_id", "pgh_context", "pgh_context_id", "pgh_created_at", "pgh_label", "pgh_obj_id", "procedure_id") VALUES (NEW."bodysite_id", NEW."bodysite_laterality_id", NEW."bodysite_qualifier_id", NEW."case_id", NEW."date", NEW."external_source", NEW."external_source_id", NEW."intent", NEW."outcome_id", COALESCE(NULLIF(CURRENT_SETTING(\'pghistory.context_metadata\', TRUE), \'\'), NULL)::JSONB, COALESCE(NULLIF(CURRENT_SETTING(\'pghistory.context_id\', TRUE), \'\'), NULL)::UUID, NOW(), \'create\', NEW."id", NEW."procedure_id"); RETURN NULL;', hash='57ec3d34ef90a1ffff1f825d09a0a951265c0ee4', operation='INSERT', pgid='pgtrigger_create_insert_e916b', table='oncology_surgery', when='AFTER')),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='surgery',
            trigger=pgtrigger.compiler.Trigger(name='update_update', sql=pgtrigger.compiler.UpsertTriggerSql(condition='WHEN (OLD."bodysite_id" IS DISTINCT FROM (NEW."bodysite_id") OR OLD."bodysite_laterality_id" IS DISTINCT FROM (NEW."bodysite_laterality_id") OR OLD."bodysite_qualifier_id" IS DISTINCT FROM (NEW."bodysite_qualifier_id") OR OLD."case_id" IS DISTINCT FROM (NEW."case_id") OR OLD."date" IS DISTINCT FROM (NEW."date") OR OLD."external_source" IS DISTINCT FROM (NEW."external_source") OR OLD."external_source_id" IS DISTINCT FROM (NEW."external_source_id") OR OLD."intent" IS DISTINCT FROM (NEW."intent") OR OLD."outcome_id" IS DISTINCT FROM (NEW."outcome_id") OR OLD."procedure_id" IS DISTINCT FROM (NEW."procedure_id"))', func='INSERT INTO "oncology_surgeryevent" ("bodysite_id", "bodysite_laterality_id", "bodysite_qualifier_id", "case_id", "date", "external_source", "external_source_id", "intent", "outcome_id", "pgh_context", "pgh_context_id", "pgh_created_at", "pgh_label", "pgh_obj_id", "procedure_id") VALUES (NEW."bodysite_id", NEW."bodysite_laterality_id", NEW."bodysite_qualifier_id", NEW."case_id", NEW."date", NEW."external_source", NEW."external_source_id", NEW."intent", NEW."outcome_id", COALESCE(NULLIF(CURRENT_SETTING(\'pghistory.context_metadata\', TRUE), \'\'), NULL)::JSONB, COALESCE(NULLIF(CURRENT_SETTING(\'pghistory.context_id\', TRUE), \'\'), NULL)::UUID, NOW(), \'update\', NEW."id", NEW."procedure_id"); RETURN NULL;', hash='42dcd708567345ee77f018930137aa0232999aa1', operation='UPDATE', pgid='pgtrigger_update_update_cf528', table='oncology_surgery', when='AFTER')),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='surgery',
            trigger=pgtrigger.compiler.Trigger(name='delete_delete', sql=pgtrigger.compiler.UpsertTriggerSql(func='INSERT INTO "oncology_surgeryevent" ("bodysite_id", "bodysite_laterality_id", "bodysite_qualifier_id", "case_id", "date", "external_source", "external_source_id", "intent", "outcome_id", "pgh_context", "pgh_context_id", "pgh_created_at", "pgh_label", "pgh_obj_id", "procedure_id") VALUES (OLD."bodysite_id", OLD."bodysite_laterality_id", OLD."bodysite_qualifier_id", OLD."case_id", OLD."date", OLD."external_source", OLD."external_source_id", OLD."intent", OLD."outcome_id", COALESCE(NULLIF(CURRENT_SETTING(\'pghistory.context_metadata\', TRUE), \'\'), NULL)::JSONB, COALESCE(NULLIF(CURRENT_SETTING(\'pghistory.context_id\', TRUE), \'\'), NULL)::UUID, NOW(), \'delete\', OLD."id", OLD."procedure_id"); RETURN NULL;', hash='7079f5a411282c459eb27e2ff517d00b53575570', operation='DELETE', pgid='pgtrigger_delete_delete_3d1ec', table='oncology_surgery', when='AFTER')),
        ),
    ]
