# Generated by Django 5.1 on 2025-03-04 07:29

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('oncology', '0001_initial'),
        ('terminology', '0002_rename_treatmentcategory_adjunctivetherapyrole'),
    ]

    operations = [
        migrations.RemoveField(
            model_name='systemictherapy',
            name='role',
        ),
        migrations.AddField(
            model_name='systemictherapy',
            name='adjunctive_role',
            field=models.ForeignKey(blank=True, help_text='Indicates the role of the adjunctive therapy (if applicable).', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='+', to='terminology.adjunctivetherapyrole', verbose_name='Treatment Role'),
        ),
        migrations.AddField(
            model_name='systemictherapy',
            name='is_adjunctive',
            field=models.GeneratedField(db_persist=True, expression=models.Case(models.When(models.Q(('adjunctive_role__isnull', False)), then=models.Value(True)), default=models.Value(False), output_field=models.BooleanField()), help_text='Indicates whether it is adjunctive therapy instead of a primary therapy ', output_field=models.BooleanField(), verbose_name='Treatment Role'),
        ),
    ]
